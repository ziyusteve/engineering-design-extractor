{% extends "base.html" %}

{% block title %}Home - Engineering Design Criteria Extractor{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- Header -->
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary mb-3">
                <i class="fas fa-cogs me-3"></i>
                Engineering Design Criteria Extractor
            </h1>
            <p class="lead text-muted">
                Extract engineering design criteria from PDF documents using Google Cloud Document AI
            </p>
        </div>

        <!-- Upload Card -->
        <div class="card">
            <div class="card-body p-5">
                <h3 class="card-title text-center mb-4">
                    <i class="fas fa-upload me-2"></i>
                    Upload PDF Document
                </h3>
                
                <form id="uploadForm" action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data">
                    <input type="file" id="fileInput" name="file" accept=".pdf" style="display:none;" required>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                            <h5 class="mb-3">Drag & Drop your PDF file here</h5>
                            <p class="text-muted mb-4">or click to browse</p>
                            <button type="button" class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                                <i class="fas fa-folder-open me-2"></i>
                                Choose File
                            </button>
                        </div>
                        <div class="upload-progress d-none" id="uploadProgress">
                            <div class="progress mb-3">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                            </div>
                            <p class="text-muted">Uploading...</p>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary btn-lg" id="submitBtn" disabled>
                            <i class="fas fa-play me-2"></i>
                            Start Extraction
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Features -->
        <div class="row mt-5">
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <i class="fas fa-file-pdf fa-2x text-primary mb-3"></i>
                        <h5 class="card-title">PDF Processing</h5>
                        <p class="card-text">Upload legacy PDF drawings and documents for automated extraction</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <i class="fas fa-brain fa-2x text-primary mb-3"></i>
                        <h5 class="card-title">AI-Powered</h5>
                        <p class="card-text">Leverage Google Cloud Document AI for intelligent data extraction</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <i class="fas fa-chart-bar fa-2x text-primary mb-3"></i>
                        <h5 class="card-title">Structured Output</h5>
                        <p class="card-text">Get organized results with confidence scores and detailed reports</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Supported Criteria -->
        <div class="card mt-5">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">
                    <i class="fas fa-list me-2"></i>
                    Supported Engineering Criteria
                </h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-weight-hanging text-success me-2"></i>
                                <strong>Loads:</strong> Dead loads, live loads, wind loads, seismic loads
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-wave-square text-info me-2"></i>
                                <strong>Seismic Forces:</strong> Earthquake design parameters
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-truck text-warning me-2"></i>
                                <strong>Design Vehicles:</strong> Vehicle specifications and requirements
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-crane text-danger me-2"></i>
                                <strong>Design Cranes:</strong> Crane specifications and parameters
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-table text-primary me-2"></i>
                                <strong>Tables:</strong> Structured data from document tables
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-image text-secondary me-2"></i>
                                <strong>Images:</strong> Diagrams and visual elements
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('fileInput');
    const submitBtn = document.getElementById('submitBtn');
    const uploadForm = document.getElementById('uploadForm');

    // Drag and drop functionality
    uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
    uploadArea.addEventListener('dragleave', function(e) {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
    });
    uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            fileInput.files = files;
            handleFileSelect();
        }
    });
    // File input change
    fileInput.addEventListener('change', handleFileSelect);
    function handleFileSelect() {
        const file = fileInput.files[0];
        if (file && file.type === 'application/pdf') {
            submitBtn.disabled = false;
        } else {
            submitBtn.disabled = true;
        }
    }
    // Form submission
    uploadForm.addEventListener('submit', function(e) {
        if (!fileInput.files || fileInput.files.length === 0) {
            e.preventDefault();
            alert('Please select a file first');
            return;
        }
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<span class="loading-spinner me-2"></span>Processing...';
    });
});
</script>
{% endblock %} 